(()=>{var t={342:(t,n,e)=>{"use strict";!function(){var n,r,o,s=0,c=[];for(r=0;r<256;r++)c[r]=(r+256).toString(16).substr(1);function a(){var t=((!n||s+16>d.BUFFER_SIZE)&&(s=0,n=d.randomBytes(d.BUFFER_SIZE)),n.slice(s,s+=16));return t[6]=15&t[6]|64,t[8]=63&t[8]|128,t}function d(){var t=a();return c[t[0]]+c[t[1]]+c[t[2]]+c[t[3]]+"-"+c[t[4]]+c[t[5]]+"-"+c[t[6]]+c[t[7]]+"-"+c[t[8]]+c[t[9]]+"-"+c[t[10]]+c[t[11]]+c[t[12]]+c[t[13]]+c[t[14]]+c[t[15]]}d.BUFFER_SIZE=4096,d.bin=a,d.clearBuffer=function(){n=null,s=0},d.test=function(t){return"string"==typeof t&&/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)},"undefined"!=typeof crypto?o=crypto:"undefined"!=typeof window&&void 0!==window.msCrypto&&(o=window.msCrypto),o=o||e(575),t.exports=d,d.randomBytes=function(){if(o){if(o.randomBytes)return o.randomBytes;if(o.getRandomValues)return"function"!=typeof Uint8Array.prototype.slice?function(t){var n=new Uint8Array(t);return o.getRandomValues(n),Array.from(n)}:function(t){var n=new Uint8Array(t);return o.getRandomValues(n),n}}return function(t){var n,e=[];for(n=0;n<t;n++)e.push(Math.floor(256*Math.random()));return e}}()}()},575:()=>{}},n={};function e(r){var o=n[r];if(void 0!==o)return o.exports;var s=n[r]={exports:{}};return t[r](s,s.exports,e),s.exports}(()=>{"use strict";e(342);var t,n,r,o,s,c,a=((t=a||{}).SECONDLY="SECONDLY",t.MINUTELY="MINUTELY",t.HOURLY="HOURLY",t.DAILY="DAILY",t.WEEKLY="WEEKLY",t.MONTHLY="MONTHLY",t.YEARLY="YEARLY",t),d=(t=>(t.SU="SU",t.MO="MO",t.TU="TU",t.WE="WE",t.TH="TH",t.FR="FR",t.SA="SA",t))(d||{}),u=((r=u||{}).CHAIR="CHAIR",r.REQ="REQ-PARTICIPANT",r.OPT="OPT-PARTICIPANT",r.NON="NON-PARTICIPANT",r),i=((n=i||{}).ACCEPTED="ACCEPTED",n.TENTATIVE="TENTATIVE",n.DECLINED="DECLINED",n.DELEGATED="DELEGATED",n.NEEDSACTION="NEEDS-ACTION",n),E=(t=>(t.INDIVIDUAL="INDIVIDUAL",t.GROUP="GROUP",t.RESOURCE="RESOURCE",t.ROOM="ROOM",t.UNKNOWN="UNKNOWN",t))(E||{}),f=((o=f||{}).display="display",o.audio="audio",o.email="email",o),m=(t=>(t.CONFIRMED="CONFIRMED",t.TENTATIVE="TENTATIVE",t.CANCELLED="CANCELLED",t))(m||{}),A=(t=>(t.FREE="FREE",t.TENTATIVE="TENTATIVE",t.BUSY="BUSY",t.OOF="OOF",t))(A||{}),T=((s=T||{}).TRANSPARENT="TRANSPARENT",s.OPAQUE="OPAQUE",s),N=(t=>(t.PUBLIC="PUBLIC",t.PRIVATE="PRIVATE",t.CONFIDENTIAL="CONFIDENTIAL",t))(N||{}),l=((c=l||{}).PUBLISH="PUBLISH",c.REQUEST="REQUEST",c.REPLY="REPLY",c.ADD="ADD",c.CANCEL="CANCEL",c.REFRESH="REFRESH",c.COUNTER="COUNTER",c.DECLINECOUNTER="DECLINECOUNTER",c);function I(t){return/\d{4}\s*[A-Z]\d{2}\s*([A-Z]\w*)/gm.exec(t)[1]}function R(t){return/\d{4}\s*([A-Z]\d{2})\s*[A-Z]\w*/gm.exec(t)[1]}function D(t){return/(\d{4})\s*[A-Z]\d{2}\s*[A-Z]\w*/gm.exec(t)[1]}function C(t){return t.match(/(?:[A-Z]\w.*\-.*)\s*(?:.*)\s*(?:.*)\s*(?:\d{2}\/\d{2}\/\d{4}\s*\-\s*\d{2}\/\d{2}\/\d{4})/gm)}function O(t){const[n,e]=t.split("-");return{code:n.trim(),name:e.trim()}}const L={Mo:1,Tu:2,We:3,Th:4,Fr:5,Sa:6,Su:0};function U(t,n){const e=n.match(/(\d+):(\d+)(AM|PM)/);let r=parseInt(e[1],10);const o=parseInt(e[2],10),s=e[3];return"PM"===s&&12!==r?r+=12:"AM"===s&&12===r&&(r=0),t.setHours(r,o,0,0),t}function p(t,n){const e=t.getDay(),r=L[n.day],o=Math.abs(r-e);return t.setDate(t.getDate()+o),U(t,n.startTime)}function y(t,n){const e=t.getDay(),r=L[n.day]-e;return t.setDate(t.getDate()+r),U(t,n.endTime)}function S(t){return/([A-Z]\w.*\-.*)\s*(?:.*)\s*(?:.*)\s*(?:\d{2}\/\d{2}\/\d{4}\s*\-\s*\d{2}\/\d{2}\/\d{4})/gm.exec(t)[1]}function g(t){const n=t.match(/^(\w{2})\s+(\d{1,2}:\d{2}[AP]M)\s*-\s*(\d{1,2}:\d{2}[AP]M)$/);if(!n)return null;const[,e,r,o]=n;return{day:e,startTime:r,endTime:o}}function P(t){const n=t.match(/^\s*(\d{2}\/\d{2}\/\d{4})\s*-\s*(\d{2}\/\d{2}\/\d{4})\s*$/);if(!n)return null;const[,e,r]=n;function o(t){const[n,e,r]=t.split("/").map(Number);return new Date(r,n-1,e)}return{start:o(e),end:o(r)}}function w(t){return/(?:[A-Z]\w.*\-.*)\s*(.*)\s*(?:.*)\s*(?:\d{2}\/\d{2}\/\d{4}\s*\-\s*\d{2}\/\d{2}\/\d{4})/gm.exec(t)[1]}function M(t){const n=t.match(/^(.*?)\s*\((.*?)\)\s*(.*)$/);if(!n)return null;const[,e,r,o]=n;return{address:e.trim(),building:r.trim(),room:o.trim()}}function Y(t){return/(?:[A-Z]\w.*\-.*)\s*(?:.*)\s*(.*)\s*(?:\d{2}\/\d{2}\/\d{4}\s*\-\s*\d{2}\/\d{2}\/\d{4})/gm.exec(t)[1]}function h(t){return/(?:[A-Z]\w.*\-.*)\s*(?:.*)\s*(?:.*)\s*(\d{2}\/\d{2}\/\d{4}\s*\-\s*\d{2}\/\d{2}\/\d{4})/gm.exec(t)[1]}function F(t){const n=(t+="#").match(/^\d{4}[\s\S]*?(?=^\d{4}|#)/gm),e=[];if(n)for(let t of n){const n=C(t),r=[];for(let t of n){const n={dayNTime:g(S(t)),location:M(w(t)),instructor:Y(t),startEndDate:P(h(t))};n.actualStartDate=p(structuredClone(n).startEndDate.start,n.dayNTime),n.actualEndDate=y(structuredClone(n).startEndDate.start,n.dayNTime),r.push(n)}const o={componentType:I(t),component:t,section:R(t),classNumber:D(t),classes:r};e.push(o)}return e}function B(){const t=[],n=document.getElementById("ptifrmtgtframe");if(n){const e=n.contentDocument||n.contentWindow.document;e?(e.querySelectorAll(".PSGROUPBOXWBO").forEach((n=>{t.push(n.innerText.trim())})),console.log("Scraped data from iframe:",t)):console.log("Iframe document is not accessible.")}else console.log("Iframe not found.");return t}document.getElementById("scrape-btn").addEventListener("click",(async()=>{let[t]=await chrome.tabs.query({active:!0,currentWindow:!0});const n=(await chrome.scripting.executeScript({target:{tabId:t.id},func:B}))[0].result.join("")+"#",e=n.match(/Class Nbr[\s\S]*?(?=Class Nbr|#)/gm),r=n.match(/[A-Z]{3}.*-.*/gm);let o=0;for(let t of e){console.log(O(r[o++]),"---------");const n=F(t);if(n)for(let t of n)for(let n of t.classes)console.log(n)}}))})()})();